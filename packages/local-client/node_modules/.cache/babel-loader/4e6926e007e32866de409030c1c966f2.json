{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{useEffect,useRef}from'react';import'./preview.css';var html=\"\\n<html>\\n<head></head>\\n<body>\\n<div id=\\\"root\\\"></div>\\n<script>\\n  const handleError = (err) =>{\\n    const root = document.querySelector('#root');\\n    root.innerHTML = '<div style=\\\"color:red;\\\"><h4>Runtime Error</h4>' + err +' </div>'\\n    console.error(err);\\n  }\\n\\n  window.addEventListener('error',(event)=>{\\n    event.preventDefault()\\n    handleError(event.error);\\n  })\\n\\n  window.addEventListener('message',(event)=>{\\n    try {\\n      eval(event.data);\\n    } catch(err) { \\n      handleError(err)\\n    }\\n  },false);\\n</script>\\n</body>\\n</html>\\n\";var Preview=function Preview(_ref){var code=_ref.code,BundleStatus=_ref.BundleStatus;var iframe=useRef();useEffect(function(){iframe.current.srcdoc=html;setTimeout(function(){iframe.current.contentWindow.postMessage(code,'*');},60);},[code]);return/*#__PURE__*/_jsxs(\"div\",{className:\"preview-wrapper\",children:[/*#__PURE__*/_jsx(\"iframe\",{title:\"preview\",ref:iframe,srcDoc:html,sandbox:\"allow-scripts\"}),BundleStatus&&/*#__PURE__*/_jsxs(\"div\",{className:\"preview-error\",children:[BundleStatus,\" \"]})]});};export default Preview;","map":{"version":3,"sources":["/home/utoker/Projects/utcode/packages/local-client/src/components/preview.tsx"],"names":["useEffect","useRef","html","Preview","code","BundleStatus","iframe","current","srcdoc","setTimeout","contentWindow","postMessage"],"mappings":"wFAAA,OAASA,SAAT,CAAoBC,MAApB,KAAkC,OAAlC,CACA,MAAO,eAAP,CAOA,GAAMC,CAAAA,IAAI,wjBAAV,CA6BA,GAAMC,CAAAA,OAA+B,CAAG,QAAlCA,CAAAA,OAAkC,MAA4B,IAAzBC,CAAAA,IAAyB,MAAzBA,IAAyB,CAAnBC,YAAmB,MAAnBA,YAAmB,CAClE,GAAMC,CAAAA,MAAM,CAAGL,MAAM,EAArB,CAEAD,SAAS,CAAC,UAAM,CACdM,MAAM,CAACC,OAAP,CAAeC,MAAf,CAAwBN,IAAxB,CACAO,UAAU,CAAC,UAAM,CACfH,MAAM,CAACC,OAAP,CAAeG,aAAf,CAA6BC,WAA7B,CAAyCP,IAAzC,CAA+C,GAA/C,EACD,CAFS,CAEP,EAFO,CAAV,CAGD,CALQ,CAKN,CAACA,IAAD,CALM,CAAT,CAOA,mBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,eACE,KAAK,CAAC,SADR,CAEE,GAAG,CAAEE,MAFP,CAGE,MAAM,CAAEJ,IAHV,CAIE,OAAO,CAAC,eAJV,EADF,CAOGG,YAAY,eAAI,aAAK,SAAS,CAAC,eAAf,WAAgCA,YAAhC,OAPnB,GADF,CAWD,CArBD,CAuBA,cAAeF,CAAAA,OAAf","sourcesContent":["import { useEffect, useRef } from 'react';\nimport './preview.css';\n\ninterface PreviewProps {\n  code: string;\n  BundleStatus: string;\n}\n\nconst html = `\n<html>\n<head></head>\n<body>\n<div id=\"root\"></div>\n<script>\n  const handleError = (err) =>{\n    const root = document.querySelector('#root');\n    root.innerHTML = '<div style=\"color:red;\"><h4>Runtime Error</h4>' + err +' </div>'\n    console.error(err);\n  }\n\n  window.addEventListener('error',(event)=>{\n    event.preventDefault()\n    handleError(event.error);\n  })\n\n  window.addEventListener('message',(event)=>{\n    try {\n      eval(event.data);\n    } catch(err) { \n      handleError(err)\n    }\n  },false);\n</script>\n</body>\n</html>\n`;\n\nconst Preview: React.FC<PreviewProps> = ({ code, BundleStatus }) => {\n  const iframe = useRef<any>();\n\n  useEffect(() => {\n    iframe.current.srcdoc = html;\n    setTimeout(() => {\n      iframe.current.contentWindow.postMessage(code, '*');\n    }, 60);\n  }, [code]);\n\n  return (\n    <div className=\"preview-wrapper\">\n      <iframe\n        title=\"preview\"\n        ref={iframe}\n        srcDoc={html}\n        sandbox=\"allow-scripts\"\n      />\n      {BundleStatus && <div className=\"preview-error\">{BundleStatus} </div>}\n    </div>\n  );\n};\n\nexport default Preview;\n"]},"metadata":{},"sourceType":"module"}