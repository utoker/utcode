{"ast":null,"code":"import _regeneratorRuntime from\"/home/utoker/Projects/utcode/packages/local-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/utoker/Projects/utcode/packages/local-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";export var unpkgPathPlugin=function unpkgPathPlugin(){return{name:'unpkg-path-plugin',setup:function setup(build){//Handle root entry file\nbuild.onResolve({filter:/(^index\\.js)/},function(){return{path:'index.js',namespace:'a'};});// Handle relative paths in a module\nbuild.onResolve({filter:/^\\.+\\//},/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(args){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",{namespace:'a',path:new URL(args.path,'https://unpkg.com'+args.resolveDir+'/').href});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());// Handle main file of a module\nbuild.onResolve({filter:/.*/},/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(args){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",{path:\"https://unpkg.com/\".concat(args.path),namespace:'a'});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());}};};","map":{"version":3,"sources":["/home/utoker/Projects/utcode/packages/local-client/src/bundler/plugins/unpkg-path-plugin.ts"],"names":["unpkgPathPlugin","name","setup","build","onResolve","filter","path","namespace","args","URL","resolveDir","href"],"mappings":"+UAEA,MAAO,IAAMA,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CACnC,MAAO,CACLC,IAAI,CAAE,mBADD,CAELC,KAFK,gBAECC,KAFD,CAE6B,CAChC;AACAA,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,cAAV,CAAhB,CAA4C,UAAM,CAChD,MAAO,CAAEC,IAAI,CAAE,UAAR,CAAoBC,SAAS,CAAE,GAA/B,CAAP,CACD,CAFD,EAGA;AACAJ,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,QAAV,CAAhB,0FAAsC,iBAAOG,IAAP,kJAC7B,CACLD,SAAS,CAAE,GADN,CAELD,IAAI,CAAE,GAAIG,CAAAA,GAAJ,CAAQD,IAAI,CAACF,IAAb,CAAmB,oBAAsBE,IAAI,CAACE,UAA3B,CAAwC,GAA3D,EACHC,IAHE,CAD6B,wDAAtC,gEAOA;AACAR,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,IAAV,CAAhB,2FAAkC,kBAAOG,IAAP,uJACzB,CACLF,IAAI,6BAAuBE,IAAI,CAACF,IAA5B,CADC,CAELC,SAAS,CAAE,GAFN,CADyB,0DAAlC,kEAMD,CAtBI,CAAP,CAwBD,CAzBM","sourcesContent":["import * as esbuild from 'esbuild-wasm';\n\nexport const unpkgPathPlugin = () => {\n  return {\n    name: 'unpkg-path-plugin',\n    setup(build: esbuild.PluginBuild) {\n      //Handle root entry file\n      build.onResolve({ filter: /(^index\\.js)/ }, () => {\n        return { path: 'index.js', namespace: 'a' };\n      });\n      // Handle relative paths in a module\n      build.onResolve({ filter: /^\\.+\\// }, async (args: any) => {\n        return {\n          namespace: 'a',\n          path: new URL(args.path, 'https://unpkg.com' + args.resolveDir + '/')\n            .href,\n        };\n      });\n      // Handle main file of a module\n      build.onResolve({ filter: /.*/ }, async (args: any) => {\n        return {\n          path: `https://unpkg.com/${args.path}`,\n          namespace: 'a',\n        };\n      });\n    },\n  };\n};\n"]},"metadata":{},"sourceType":"module"}