var version=function(e){"use strict";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".JSXElement.JSXIdentifier{color:#4169e1}.JSXElement.JSXBracket{color:#ff8c00}.JSXElement.JSXText{color:#b8860b}.JSXElement.JSXGlyph{background:cyan;opacity:.25}.JSXClosingFragment.JSXBracket,.JSXOpeningElement.JSXBracket,.JSXOpeningFragment.JSXBracket{color:#ff8c00;font-weight:700}.JSXOpeningElement.JSXIdentifier{color:#4169e1}.JSXClosingElement.JSXBracket{color:#ff8c00;font-weight:lighter}.JSXClosingElement.JSXIdentifier{color:#4169e1;font-weight:lighter}.JSXAttribute.JSXIdentifier{color:#4682b4}.JSXExpressionContainer.JSXBracket,.JSXSpreadAttribute.JSXBracket,.JSXSpreadChild.JSXBracket{color:#ff8c00}");const t=(e,t,n={})=>{const o=[];return t(e,{...n,enter:e=>{e.type.toUpperCase().includes("JSX")&&o.push(e)}}),o},n=e=>e&&("object"===e.key||"property"===e.key||"name"===e.key||"namespace"===e.key),o=e=>e&&e.parentPath&&e.parentPath.isJSXAttribute(),i=e=>e&&e.node&&e.node.loc,r=e=>{const t=i(e);return t?{start:{...t.start},end:{...t.end}}:null},s=e=>{const t=r(e);return t?("object"===e.key&&e.container&&(t.end={...e.container.property.loc.start}),t):[null,null,null,null]},l=e=>{if(!i(e))return[null,null,null,null];const t=e.node.openingElement;if(!t)return[null,null,null,null];const n=t.name.name,o={start:{...t.loc.start},end:{...t.name.loc.start}},r={start:{...t.loc.end},end:{...t.loc.end}};return r.start.column--,t.selfClosing&&r.start.column--,[t,n,o,r]},a=e=>{if(!i(e))return[null,null,null,null];const t=e.node.closingElement;if(!t)return[null,null,null,null];const n=t.name&&t.name.name,o={start:{...t.loc.start},end:{...t.name.loc.start}},r={start:{...t.loc.end},end:{...t.loc.end}};return r.start.column--,[t,n,o,r]},c=e=>{const t=i(e);if(!t)return[null,null,null,null];let n=null,o=e.isJSXSpreadChild()?"expression":e.isJSXSpreadAttribute()?"argument":null,r=null;o?(n=e.node[o],r={start:{...n.loc.start},end:{...n.loc.end}},n.extra&&n.extra.parenthesized&&(r.start.column--,r.end.column++)):(r={start:{...t.start},end:{...t.end}},r.start.column++,r.end.column--);return[n,o,{start:{...t.start},end:{...r.start}},{start:{...r.end},end:{...t.end}}]},m="editor.action.commentLine",u=(e,t="babel")=>(t,n=0,o=0,i=0,r=0)=>t&&t.start?new e.Range(n+t.start.line,o+t.start.column+1,i+t.end?t.end.line:t.start.line,r+t.end?t.end.column+1:t.start.column+1):new e.Range(1,1,1,1),h=(e="babel")=>(e,t=0,n=0,o=0,i=0)=>{const r={start:{line:0,column:0},end:{line:0,column:0}};return e?(e.lineNumber?(r.start.line=t+e.lineNumber,r.start.column=n+e.column-1,r.end.line=o+e.lineNumber,r.end.column=i+e.column-1):(r.start.line=t+e.startLineNumber,r.start.column=n+e.startColumn-1,r.end.line=o+e.endLineNumber,r.end.column=i+e.endColumn-1),r):r};class d{constructor(e,t,n){this.monacoEditor=e,this.monaco=t,this.loc2Range=n||((e,t=0,n=0,o=0,i=0)=>{const r={start:{line:0,column:0},end:{line:0,column:0}};return e?(e.lineNumber?(r.start.line=t+e.lineNumber,r.start.column=n+e.column-1,r.end.line=o+e.lineNumber,r.end.column=i+e.column-1):(r.start.line=t+e.startLineNumber,r.start.column=n+e.startColumn-1,r.end.line=o+e.endLineNumber,r.end.column=i+e.endColumn-1),r):r}),this.runEditorCommentLineAction=()=>this.monacoEditor.getAction(m).run(),this.getLineIndentationColumn=e=>this.monacoEditor.getModel().getLineFirstNonWhitespaceColumn(e),this.getCommentableStartingRange=e=>{const t=this.getLineIndentationColumn(e.startLineNumber);return new this.monaco.Range(e.startLineNumber,t,e.startLineNumber,t)},this.getCommentContainingStartingRange=e=>{let t=this.getLineIndentationColumn(e.startLineNumber);t=t?t-1:0;return new this.monaco.Range(e.startLineNumber,t,e.startLineNumber,t)},this.getSelectionFirstLineText=()=>{const e=this.monacoEditor.getModel(),{startLineNumber:t}=this.monacoEditor.getSelection(),n=new this.monaco.Range(t,this.getLineIndentationColumn(t),t,e.getLineMaxColumn(t));return e.getValueInRange(n)}}}const g=(e,t={},n={})=>n.iShowHover?{...t,hoverMessage:`(${e.type})`}:t,S={ELEMENT:"ELEMENT",ALL:"ALL",IDENTIFIER:"IDENTIFIER",EDGE:"EDGE",STYLE:"STYLE"},p={[S.ELEMENT]:(e,t,n)=>{const[o,r,s,c]=l(e),m=[];o&&(m.push([s,n.isUseSeparateElementStyles?J.JSXBracket.openingElementOptions:J.JSXBracket.options]),m.push([c,n.isUseSeparateElementStyles?J.JSXBracket.openingElementOptions:J.JSXBracket.options]));const[u,,h,d]=a(e);u&&(m.push([h,n.isUseSeparateElementStyles?J.JSXBracket.closingElementOptions:J.JSXBracket.options]),m.push([d,n.isUseSeparateElementStyles?J.JSXBracket.closingElementOptions:J.JSXBracket.options]));const g=i(e);return n.isHighlightGlyph&&m.push([g,J.JSXElement.options(r)]),m},[S.ALL]:(e,t,n)=>{const o=s(e),i=[];return o&&i.push([o,g(e,t,n)]),i},[S.IDENTIFIER]:(e,t,i)=>n(e)?p[S.ALL](e,o(e)?J.JSXAttribute.options:t,i):[],[S.EDGE]:(e,t,n)=>{const o=g(e,t,n),[,,i,r]=c(e),s=[];return s.push([i,o]),s.push([r,o]),s},[S.STYLE]:()=>[]},J={JSXIdentifier:{highlightScope:S.IDENTIFIER,options:{inlineClassName:"JSXElement.JSXIdentifier"}},JSXOpeningFragment:{highlightScope:S.ALL,options:{inlineClassName:"JSXOpeningFragment.JSXBracket"}},JSXClosingFragment:{highlightScope:S.ALL,options:{inlineClassName:"JSXClosingFragment.JSXBracket"}},JSXText:{highlightScope:S.ALL,options:{inlineClassName:"JSXElement.JSXText"}},JSXExpressionContainer:{highlightScope:S.EDGE,options:{inlineClassName:"JSXExpressionContainer.JSXBracket"}},JSXSpreadChild:{highlightScope:S.EDGE,options:{inlineClassName:"JSXSpreadChild.JSXBracket"}},JSXSpreadAttribute:{highlightScope:S.EDGE,options:{inlineClassName:"JSXSpreadAttribute.JSXBracket"}},JSXElement:{highlightScope:S.ELEMENT,options:e=>({glyphMarginClassName:"JSXElement.JSXGlyph",glyphMarginHoverMessage:"JSX Element"+(e?": "+e:"")})},JSXBracket:{highlightScope:S.STYLE,options:{inlineClassName:"JSXElement.JSXBracket"},openingElementOptions:{inlineClassName:"JSXOpeningElement.JSXBracket"},closingElementOptions:{inlineClassName:"JSXClosingElement.JSXBracket"}},JSXOpeningElement:{highlightScope:S.STYLE,options:{inlineClassName:"JSXOpeningElement.JSXIdentifier"}},JSXClosingElement:{highlightScope:S.STYLE,options:{inlineClassName:"JSXClosingElement.JSXIdentifier"}},JSXAttribute:{highlightScope:S.STYLE,options:{inlineClassName:"JSXAttribute.JSXIdentifier"}}};class E{constructor(e,t,n=J){let o=[],i=[];const r=([e,n])=>o.push({range:t(e),options:n}),s=()=>(i=e.deltaDecorations(i||[],o),o=[],i);this.deltaJSXDecorations=(e,t)=>{for(const o in n)e.filter((e=>e.type===o)).forEach((e=>p[n[o].highlightScope](e,n[o].options,t).forEach((e=>r(e)))));return s()},this.reset=()=>{o=[],s()},this.reset()}}const X={JS:"JS",JSX:"JSX"};function C(e,t,n,o){if(!(e&&t&&n&&o))return X.JS;let i=null,r=null,s=null,l=null;return e.forEach((e=>{const a=o(e.node.loc);("name"===e.key||"property"===e.key)&&e.isJSXIdentifier()&&a.intersectRanges(t)&&(r&&!r.containsRange(a)||(r=a,l=e)),a.intersectRanges(n)&&(i&&!i.containsRange(a)||(i=a,s=e))})),!s||s.isJSXExpressionContainer()||l?X.JS:X.JSX}class L{constructor(e,t){let n=null;this.getEditorCommandId=()=>n;let o=!1;this.isJSXCommentCommandActive=()=>o;const i=()=>{o=!1};this.runJsxCommentAction=(t,o)=>{const{monacoEditor:i,monaco:r,runEditorCommentLineAction:s,getSelectionFirstLineText:l}=e;if(l().match(/^\s*\/[/*]/))return void s();const a=i.getModel();let c=!0;const m=[];for(let e=t.startLineNumber;e<=t.endLineNumber;e++){const t=new r.Range(e,a.getLineFirstNonWhitespaceColumn(e),e,a.getLineMaxColumn(e)),n=a.getValueInRange(t);m.push({commentRange:t,commentText:n}),c=c&&!!n.match(/{\/\*/)}if(o!==X.JSX&&!c)return void s();let u=[],h=0;for(let e=t.startLineNumber;e<=t.endLineNumber;e++){let{commentText:e,commentRange:t}=m[h++];c?(e=e.replace(/{\/\*/,""),e=e.replace(/\*\/}/,"")):e=`{/*${e}*/}`,u.push({identifier:{major:1,minor:1},range:t,text:e,forceMoveMarkers:!0})}u.length&&i.executeEdits(n,u)},this.addJSXCommentCommand=()=>{const{monacoEditor:r,monaco:s,loc2Range:l,runEditorCommentLineAction:a,getCommentableStartingRange:c,getCommentContainingStartingRange:m}=e;return n?(o=!0,i):(n=r.addCommand(s.KeyMod.CtrlCmd|s.KeyCode.US_SLASH,(()=>{o?t().then((e=>{const t=r.getSelection(),n=C(e,c(t),m(t),l);this.runJsxCommentAction(t,n)})).catch((()=>{a()})):a()})),o=!0,r.onDidDispose(i),i)}}}const b={parser:"babel",isHighlightGlyph:!1,iShowHover:!1,isUseSeparateElementStyles:!1,jsxCommenter:null,monacoEditorManager:null,decoratorMapper:null},f=(e,t)=>()=>new Promise(((n,o)=>{try{return n(e(t.getValue()))}catch(e){return o(e)}})),N=(e,n,o=t)=>()=>new Promise(((t,i)=>{n().then((n=>{try{return t(o(n,e))}catch(e){return i(e)}})).catch((e=>i(e)))})),M=(e,t,n,o,i={})=>{const{parserType:r,jsxCommenter:s,monacoEditorManager:l}=i,a=(e,t=0,n=0,o=0,i=0)=>{const r={start:{line:0,column:0},end:{line:0,column:0}};return e?(e.lineNumber?(r.start.line=t+e.lineNumber,r.start.column=n+e.column-1,r.end.line=o+e.lineNumber,r.end.column=i+e.column-1):(r.start.line=t+e.startLineNumber,r.start.column=n+e.startColumn-1,r.end.line=o+e.endLineNumber,r.end.column=i+e.endColumn-1),r):r},c=u(e,r),m=f(t,o),h=N(n,m),g=l||new d(o,e,c);return[s||new L(g,h),g,h,m,c,a]},x=e=>(t,n={})=>e(t,{...n,sourceType:"module",plugins:["jsx"],errorRecovery:!0});return e.COMMENT_ACTION_ID=m,e.HIGHLIGHT_MODE=p,e.HIGHLIGHT_TYPE=S,e.JSXCommentContexts=X,e.JSXTypes=J,e.MonacoEditorManager=d,e.cloneLoc=r,e.collectJSXExpressions=t,e.configureLoc2Range=u,e.configureRange2Loc=h,e.default=class{constructor(e,n,o,i,r={}){this.options={...b,...r};const{jsxCommenter:s,monacoEditorManager:l,decoratorMapper:a}=this.options;this.babelParse=x(n);const[c,m,u,h,d,g]=M(e,this.babelParse,o,i,this.options);this.jsxCommenter=s||c,this.monacoEditorManager=l||m,this.parseJSXExpressionsPromise=u,this.getAstPromise=h,this.loc2Range=d,this.range2Loc=g,this.addJSXCommentCommand=this.jsxCommenter.addJSXCommentCommand,this.decoratorMapper=a||new E(i,this.loc2Range),this.decoratorMapperReset=()=>{a.reset()},this.highlight=(e,n=t)=>new Promise(((t,i)=>{const{decoratorMapper:r,options:s}=this,l={decoratorMapper:r,options:s,ast:e,jsxExpressions:[]};if(!e)return t(l);try{const i=n(e,o);return r.deltaJSXDecorations(i,s),l.jsxExpressions=i,t(l)}catch(e){return i(e)}})),this.highlightCode=(e=(e=>e),t=(e=>e),n=this.getAstPromise,o=(e=>e))=>n().then((n=>{this.highlight(n).then(e).catch(t)})).catch(o);let S=!1;this.isHighlightBoundToModelContentChanges=()=>S,this.highlightOnDidChangeModelContent=(e=100,t=(e=>e),n=(e=>e),o=this.getAstPromise,r=(e=>e))=>{const s=()=>this.highlightCode(t,n,o,r);s();let l=null,a={onDidChangeModelContentDisposer:i.onDidChangeModelContent((()=>{clearTimeout(l),l=setTimeout(s,e)})),onDidChangeModelDisposer:i.onDidChangeModel((()=>{s()})),dispose:()=>{a.onDidChangeModelContentDisposer.dispose(),a.onDidChangeModelDisposer.dispose()}};S=!0;return i.onDidDispose((()=>{this.decoratorMapper.reset(),a=null,S=!1})),()=>{this.decoratorMapper.reset(),S&&(S=!1,a&&a.dispose(),a=null)}},this.highLightOnDidChangeModelContent=this.highlightOnDidChangeModelContent}},e.extractJSXClosingElement=a,e.extractJSXExpressionEdges=c,e.extractJSXOpeningElement=l,e.getCuratedLoc=s,e.getJSXContext=C,e.getLoc=i,e.isJSXIdentifier=n,e.isParentJSXAttribute=o,e.makeBabelParse=x,e.makeGetAstPromise=f,e.makeJSXCommenterBundle=M,e.makeParseJSXExpressionsPromise=N,e.prepareOptions=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
